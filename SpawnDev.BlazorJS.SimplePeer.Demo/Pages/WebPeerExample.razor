@page "/WebPeerExample"
@implements IDisposable

<PageTitle>SpawnDev.BlazorJS.SimplePeer</PageTitle>

<h1>SpawnDev.BlazorJS.SimplePeer</h1>

<p>
    An "offer" will be generated by the initiator. Paste this into the receiver's form and
    hit submit. The receiver generates an "answer". Paste this into the initiator's form and
    hit submit. <a href="https://github.com/feross/simple-peer?tab=readme-ov-file#usage">Original Example</a>
</p>
<br />
<a href="@($"{new Uri(NavigationManager.Uri).GetLeftPart(UriPartial.Path)}")" target="_blank">Open in new window</a>
<br />

<div>
    Role: @peerRole<br />
    <button disabled="@(webPeer != null)" class="btn btn-primary" @onclick="@(()=>Init(true))">Create Initiator</button>
    <button disabled="@(webPeer != null)" class="btn btn-primary" @onclick="@(()=>Init(false))">Create Receiver</button>
</div>

<div>
    <textarea style="width: 600px; word-wrap: break-word; white-space: normal;" @bind=@incoming></textarea>
    <button disabled="@(webPeer == null)" @onclick=@Submit>submit</button>
</div>
<div>
    <button @onclick=@CallMethodTest>call method</button>
</div>
<div>
    <pre style="width: 600px; word-wrap: break-word; white-space: normal;">@((MarkupString)outgoing)</pre>
</div>
<div>
    <pre style="width: 600px; word-wrap: break-word; white-space: normal;">@((MarkupString)log)</pre>
</div>
